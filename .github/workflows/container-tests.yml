on:
  pull_request_target:
    types: [opened, synchronize, reopened]

jobs:
  container-tests:
    runs-on: ubuntu-20.04
    name: "Container-tests: ${{ matrix.version }} - ${{ matrix.os_test }}"
    strategy:
      fail-fast: false
      matrix:
        version: [ "1.20", "1.22", "1.22-micro", "1.24" ]
        os_test: [ "fedora", "rhel7", "rhel8", "rhel9", "c9s", "rhel9-unsubscribed" ]
        test_case: [ "container" ]

    steps:
      - uses: sclorg/tfaga-wrapper@main
        with:
          os_test: ${{ matrix.os_test }}
          version: ${{ matrix.version }}
          test_case: ${{ matrix.test_case }}
          public_api_key: ${{ secrets.TF_PUBLIC_API_KEY }}
          private_api_key: ${{ secrets.TF_INTERNAL_API_KEY }}
